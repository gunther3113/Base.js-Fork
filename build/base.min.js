!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.returnExportsGlobal=b()}):"object"==typeof exports?module.exports=b():a.Base=b()}(this,function(){var a=function(){};return a.extend=function(b,c){var d=a.prototype.extend;a._prototyping=!0;var e=new this;d.call(e,b),e.base=function(){},a._prototyping=!1;var f=e.constructor,g=e.constructor=function(){if(!a._prototyping)if(this._constructing||this.constructor==g)this._constructing=!0,f.apply(this,arguments),this._constructing=!1;else if(null!=arguments[0])return(arguments[0].extend||d).call(arguments[0],e)};return d.call(g,this),g.ancestor=this,g.prototype=e,g.valueOf=function(a){return"object"==a?g:f.valueOf()},d.call(g,c),"function"==typeof g.init&&g.init(),g},a.prototype={extend:function(b,c){if(arguments.length>1){var d=this[b];if(d&&"function"==typeof c&&(!d.valueOf||d.valueOf()!=c.valueOf())&&/\bbase\b/.test(c)){var e=c.valueOf();c=function(){var b,c=this.base||a.prototype.base;return this.base=d,b=0===arguments.length?e.call(this):e.apply(this,arguments),this.base=c,b},c.valueOf=function(a){return"object"==a?c:e},c.toString=a.toString}this[b]=c}else if(b){var f=a.prototype.extend;a._prototyping||"function"==typeof this||(f=this.extend||f);for(var g={toSource:null},h=["constructor","toString","valueOf"],i=a._prototyping?0:1;j=h[i++];)b[j]!=g[j]&&f.call(this,j,b[j]);for(var j in b)g[j]||f.call(this,j,b[j])}return this}},a=a.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(a,b,c){for(var d in a)void 0===this.prototype[d]&&b.call(c,a[d],d,a)},implement:function(){for(var a=0;a<arguments.length;a++)"function"==typeof arguments[a]?arguments[a](this.prototype):this.prototype.extend(arguments[a]);return this},toString:function(){return String(this.valueOf())}})});