!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.returnExportsGlobal=b()}):"object"==typeof exports?module.exports=b():a.Base=b()}(this,function(){var a="function",b="object",c="string",d=!1,e=["constructor","toString","valueOf"],f=e.length,g=/\bbase\b/,h=function(){},i={toSource:null,base:h},j=function(){};return j.extend=function(c,e){var f=j.prototype.extend;d=!0;var g=new this;f.call(g,c),g.base=i.base,d=!1;var h=g.constructor,k=g.constructor=function(){d||(this&&(this._constructing||this.constructor===k)?(this._constructing=!0,h.apply(this,arguments),this._constructing=!1):arguments.length&&j.cast.apply(k,arguments))};return f.call(k,this),k.ancestor=this,k.prototype=g,k.valueOf=function(a){return a===b?k:h.valueOf()},f.call(k,e),typeof k.init===a&&k.init(),k},j.prototype.extend=function(h,k){if(typeof h===c&&arguments.length>1){var l=this[h];if(l&&typeof k===a&&(!l.valueOf||l.valueOf()!==k.valueOf())&&g.test(k)){var m=k.valueOf();k=function(){var a,b=this.base||i.base;return this.base=l,a=0===arguments.length?m.call(this):m.apply(this,arguments),this.base=b,a},k.valueOf=function(a){return a===b?k:m},k.toString=j.toString}this[h]=k}else if(h){var n=j.prototype.extend;d||typeof this===a||(n=this.extend||n);for(var o,p=d?0:1;f>p;p++)o=e[p],h[o]!==i[o]&&n.call(this,o,h[o]);for(o in h)i[o]||n.call(this,o,h[o])}return this},j=j.extend({base:i.base},{ancestor:Object,version:"1.1",cast:function(){for(var b,c,d=0,e=arguments.length;e>d;d++)c=arguments[d],b=c.extend||j.prototype.extend,typeof c===a?(b=c.prototype.extend||j.prototype.extend,b.call(c.prototype,this.prototype),b.call(c,this),c.ancestor=this):b.call(c,this.prototype);return this},implement:function(){for(var a=0;a<arguments.length;a++)this.cast.call(arguments[a],this);return this},toString:function(){return this.valueOf()+""}})});